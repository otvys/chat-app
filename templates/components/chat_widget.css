<!-- =============================================================================
     WIDGET DE CHAT - COMPONENTE INDEPENDENTE
     =============================================================================
     Este componente pode ser incluído em qualquer página.
     Requer: chat-widget.css e chat-widget.js
-->

<!-- Widget de Chat - Botão Flutuante -->
<button id="chat-toggle-btn" class="chat-toggle-btn" type="button">
    <i class="bi bi-chat-dots-fill"></i>
    <!-- Badge de mensagens não lidas -->
    <span id="chat-badge" class="chat-badge d-none">0</span>
</button>

<!-- Widget de Chat - Painel Principal -->
<div id="chat-panel" class="chat-panel d-none">

    <!-- Header do Chat -->
    <div class="chat-header">
        <div class="d-flex align-items-center justify-content-between">
            <h6 class="mb-0">
                <i class="bi bi-chat-dots"></i> Chat
            </h6>
            <button id="chat-close-btn" class="btn btn-sm btn-link text-white p-0">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>

        <!-- Busca de Usuários -->
        <div class="mt-2">
            <div class="position-relative">
                <input
                    type="text"
                    id="chat-search-input"
                    class="form-control form-control-sm"
                    placeholder="Buscar usuário..."
                    autocomplete="off"
                >
                <!-- Resultados da busca aparecem aqui -->
                <div id="chat-search-results" class="chat-search-results d-none"></div>
            </div>
        </div>
    </div>

    <!-- Corpo do Chat -->
    <div class="chat-body">

        <!-- Lista de Conversas (visível quando não há conversa aberta) -->
        <div id="chat-conversas-container" class="chat-conversas-container">
            <div id="chat-conversas-list" class="chat-conversas-list">
                <!-- Conversas serão carregadas via JavaScript -->
            </div>
            <!-- Mensagem quando não há conversas -->
            <div id="chat-conversas-empty" class="text-center text-muted py-4 d-none">
                <i class="bi bi-chat-square-text display-6"></i>
                <p class="mt-2 small">Nenhuma conversa</p>
            </div>
        </div>

        <!-- Área de Mensagens (visível quando há conversa aberta) -->
        <div id="chat-mensagens-container" class="chat-mensagens-container d-none">

            <!-- Header da Conversa com nome do usuário -->
            <div class="chat-conversa-header">
                <button id="chat-voltar-btn" class="btn btn-sm btn-link p-0 me-2">
                    <i class="bi bi-arrow-left"></i>
                </button>
                <span id="chat-conversa-nome">Nome do Usuário</span>
            </div>

            <!-- Lista de Mensagens -->
            <div id="chat-mensagens-list" class="chat-mensagens-list">
                <!-- Mensagens serão carregadas via JavaScript -->
            </div>

            <!-- Formulário para enviar mensagem -->
            <form id="chat-message-form" class="chat-message-form">
                <div class="input-group">
                    <input
                        type="text"
                        id="chat-message-input"
                        class="form-control form-control-sm"
                        placeholder="Digite sua mensagem..."
                        autocomplete="off"
                        maxlength="5000"
                    >
                    <button type="submit" class="btn btn-primary btn-sm">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
            </form>
        </div>

    </div>
</div>